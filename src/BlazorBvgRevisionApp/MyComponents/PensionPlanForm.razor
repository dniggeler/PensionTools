@using System.Globalization
@using BlazorBvgRevisionApp.MyComponents.Models
@using BlazorBvgRevisionApp.Pages.Converters

<MudGrid>
    <MudItem md="3">
        <MudNumericField Label="Versicherter Lohn" Format="n0" Min="0" Step="1000" @bind-Value="PensionPlan.InsuredSalary" Culture="CultureInfo.InvariantCulture" />
    </MudItem>

   <MudItem md="3">
        <MudNumericField Label="PK Guthaben Ende Jahr" Format="n0" Min="0" Step="1000" @bind-Value="PensionPlan.RetirementCapitalEndOfYear" Culture="CultureInfo.InvariantCulture" />
    </MudItem>

    <MudItem md="3">
        <MudNumericField T="decimal" Label="Projektionszins" Converter="@PercentConverter.DecimalConverter" Format="P2" Min="0M" Step="0.005M" @bind-Value="PensionPlan.ProjectionInterestRate" Culture="CultureInfo.InvariantCulture" />
    </MudItem>

    <MudItem md="3">
        <MudNumericField T="decimal" Label="Umwandlungssatz" Converter="@PercentConverter.DecimalConverter" Format="P2" Min="0M" Step="0.005M" @bind-Value="PensionPlan.ConversionRate" Culture="CultureInfo.InvariantCulture" />
    </MudItem>
    
    <MudItem md="12">
        <MudDataGrid Items="@PensionPlan.RetirementCredits" HorizontalScrollbar="true" Bordered="true" Dense="true">
            <ToolBarContent>
                <MudText Typo="Typo.h6">Altersgutschriften</MudText>
            </ToolBarContent>
            <Columns>
                <PropertyColumn Property="x => x.FromAge" Title="Von" Sortable="false"/>
                <PropertyColumn Property="x => x.ToAge" Title="Bis" Sortable="false"/>
                <TemplateColumn Sortable="false" Title="Satz">
                    <CellTemplate>
                        <MudNumericField T="decimal" Converter="@PercentConverter.DecimalConverter" Format="P2" Min="0M" Step="0.01M" @bind-Value="context.Item.Rate"/>
                    </CellTemplate>
                </TemplateColumn>
            </Columns>
        </MudDataGrid>
    </MudItem>

</MudGrid>

@code {
    [Parameter] public required PensionPlanViewModel PensionPlan { get; set; }
}