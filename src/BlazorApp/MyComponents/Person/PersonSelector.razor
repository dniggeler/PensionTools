@using PensionCoach.Tools.CommonTypes
@using System.Globalization

@inject IStringLocalizer<Resource> localizer

<RadzenDataGrid
    AllowPaging="true"
    PageSize="4"
    AllowSorting="true"
    Data="@Persons"
    TItem="PersonViewModel"
    SelectionMode="DataGridSelectionMode.Single"
    @bind-Value="@selectedPersons">
    <Columns>
        <RadzenDataGridColumn TItem="PersonViewModel" Property="Name" Title="@localizer["person.name"]" />
        <RadzenDataGridColumn TItem="PersonViewModel" Property="MunicipalityName" Title="@localizer["person.residence"]" />
        <RadzenDataGridColumn TItem="PersonViewModel" Property="DateOfBirth" Title="@localizer["person.birthdate"]" FormatString="{0:d}" />
        <RadzenDataGridColumn TItem="PersonViewModel" Property="Gender" Title="@localizer["person.gender"]">
            <Template Context="person">
                <GenderSelector SelectedGender="@person.Gender" IsReadOnly="true"/>
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>

@if (selectedPersons?.Any() == true)
{
    <BlazorApp.Pages.PersonView Person="selectedPersons[0]"/>
}

@code {
    [Parameter]
    public IEnumerable<PersonViewModel> Persons { get; set; }

    private IList<PersonViewModel> selectedPersons;
}
