@using Microsoft.AspNetCore.Components
@using Microsoft.Extensions.Localization
@using PensionCoach.Tools.CommonTypes
@using BlazorApp.Resources

@inject IStringLocalizer<PensionComponents> localizer

<RadzenDropDown Name="gender"
                Disabled="@IsReadOnly"
                Data=@genderModels
                ValueProperty="Value"
                TextProperty="Name"
                @bind-Value="@SelectedGender"
                Change="@(HandleChange)">
</RadzenDropDown>

@code {
    internal class GenderViewModel
    {
        public Gender Value { get; set; }

        public string Name { get; set;}
    }

    [Parameter]
    public bool IsReadOnly { get; set; }

    [Parameter]
    public Gender SelectedGender { get; set; } = Gender.Undefined;

    [Parameter]
    public EventCallback<Gender> OnSelected { get; set; }

    private readonly List<GenderViewModel> genderModels = new();

    protected override void OnInitialized()
    {
        genderModels.Add(new GenderViewModel { Name = localizer["gender.male"], Value = Gender.Male });
        genderModels.Add(new GenderViewModel { Name = localizer["gender.female"], Value = Gender.Female });
    }

    private void HandleChange(object value)
    {
        SelectedGender = (Gender)value;
        OnSelected.InvokeAsync(SelectedGender);
    }
}
