@using BlazorApp.ViewModels
@using System.Globalization

<EditForm Model="GenericDefinition">
    <MudGrid>
        <MudItem md="12">
            <MudNumericField T="int" Label="Startjahr" Format="n0" Culture="CultureInfo.InvariantCulture" ValueChanged="HandleChangeStartingYear" />
            <MudNumericField T="decimal" Label="Startbetrag" Format="n0" Culture="CultureInfo.InvariantCulture" ValueChanged="HandleChangeInitialAmount" />
            <MudNumericField T="decimal" Label="Jährlicher Betrag" Format="n0" Culture="CultureInfo.InvariantCulture" ValueChanged="HandleChangeRecurrentAmount"/>
            <MudNumericField T="int" Label="Wiederholungen" Format="n0" Culture="CultureInfo.InvariantCulture" ValueChanged="HandleChangeNumberOfPeriods"/>
        </MudItem>
    </MudGrid>
</EditForm>


@code {
    [Parameter]
    public InvestmentDefinitionViewModel GenericDefinition { get; set; }

    [Parameter]
    public EventCallback<InvestmentDefinitionViewModel> OnChanged { get; set; }

    private void HandleChangeStartingYear(int value)
    {
        GenericDefinition.Year = value;
        OnChanged.InvokeAsync(GenericDefinition);
    }

    private void HandleChangeNumberOfPeriods(int value)
    {
        GenericDefinition.NumberOfPeriods = value;
        OnChanged.InvokeAsync(GenericDefinition);
    }

    private void HandleChangeRecurrentAmount(decimal value)
    {
        GenericDefinition.RecurrentAmount = value;
        OnChanged.InvokeAsync(GenericDefinition);
    }

    private void HandleChangeInitialAmount(decimal value)
    {
        GenericDefinition.InitialAmount = value;
        OnChanged.InvokeAsync(GenericDefinition);
    }
}